## Documentation

Documentation may be generated by running doxygen:
```bash
doxygen Doxyfile
```

Then check the `doc/` directory. Documentation is currently sparse.

## Debugging

To add extra debugging information and messages, add the `-g` flag when building Shadow. See the help menu with `python setup.py build --help`.

You will need to set `LD_PRELOAD` when running in gdb. Its value should contain a colon separated list of every 'preload' library (generally prefixed with `libshadow-preload` and installed to `~/.shadow/lib`):
```
gdb shadow-bin
> set environment LD_PRELOAD=/home/rob/.shadow/lib/libshadow-preload.so
> set args --echo
> run
```

If this doesn't work and you just see "exited with code 1", instead set
`LD_PRELOAD` in gdb as follows:
```
> set exec-wrapper env LD_PRELOAD=/home/rob/.shadow/lib/libshadow-preload.so
```

If you want to be able to run Shadow through valgrind and the application you 
are running in Shadow uses OpenSSL (i.e. the Scallion plug-in), you should configure OpenSSL with the 
additional option: `-DPURIFY`. This fixes OpenSSL so it doesn't break valgrind.
You may also want to ensure that debugging symbols are included in the GLib
that Shadow links to, and any library used by the plug-in. This can be achieved
with the compiler flag `-g` when manually building a local version of GLib.

## Tagging new versions

The following commands can be used to tag a new version of Shadow, after which an
archive and signature can be uploaded to github's download section, and linked
from the Shadow website.

```bash
git tag -s v1.5.0
git push --tags
git checkout release
git merge v1.5.0
git archive --prefix=shadow-v1.5.0/ --format=tar v1.5.0 | gzip > shadow-v1.5.0.tar.gz
gpg -a -b shadow-v1.5.0.tar.gz
gpg --verify shadow-v1.5.0.tar.gz.asc
```
