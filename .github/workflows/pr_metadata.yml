# Automatically add and check metadata on pull requests
# https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions
name: "Pull Request Metadata"

on:
  pull_request_target:
    # We probably want [opened, synchronize, milestoned] here, but the 'milestoned'
    # event trigger is not yet available on pull requests so we use best effort.
    types: [opened, synchronize, reopened, assigned, edited, ready_for_review]

permissions:
  pull-requests: write

jobs:
  Triage:
    runs-on: ubuntu-latest
    steps:
    - name: Apply Labels
      # Add labels based on paths modified in PR
      # https://github.com/actions/labeler
      uses: actions/labeler@v6
      with:
        repo-token: "${{ secrets.GITHUB_TOKEN }}"
        configuration-path: .github/pr_labeler_conf.yml
        sync-labels: true
